# Aqua-Splunk Integration Demo Guide

This guide outlines how to demonstrate the Aqua-Splunk integration solution to customers. The demo is fully interactive with animated progress bars and colorful visual feedback.

## Prerequisites

Before running the demo, ensure you have:

1. Python 3.9+ installed
2. Required Python packages installed:
   ```
   pip install -r requirements.txt
   ```
3. `jq` command-line tool installed (for JSON parsing)
4. An Aqua Security scan report (JSON format) in one of these locations:
   - `../Aqua-Reports/aqua-scan.json`
   - `examples/input/aqua-scan.json`

## Quick Demo Setup

1. Navigate to the vulnerability-filter-package directory:
   ```
   cd vulnerability-filter-package
   ```

2. Run the interactive demo script:
   ```
   ./demo.sh
   ```

3. **Important**: The demo is fully interactive - it will pause at each section waiting for you to press Enter. This allows you to explain each concept before proceeding.

## Demo Walkthrough

The demo showcases three key features with animated visual feedback:

### 1. Severity-Based Filtering (Demo 1)

**What Happens:**
- Animated progress bar while processing vulnerabilities
- Real-time statistics showing the filtering results
- Visual impact bar showing data reduction percentage

**What You'll See:**
- Original number of vulnerabilities
- High-severity vulnerabilities (CVSS â‰¥ 7.0) remaining
- Data volume reduction percentage (typically 60-80%+)
- Animated progress visualization

**Key Talking Points:**
- "Notice how we've reduced the data volume by X% while keeping all critical security issues"
- "This directly translates to Splunk license savings and faster indexing"
- "Security teams can focus on what matters most - high-severity vulnerabilities"
- "Enables prioritized remediation efforts based on actual risk"

### 2. Delta Reporting (Demo 2)

**What Happens:**
- Script simulates a new vulnerability discovery (CVE-2025-DEMO-001)
- Compares current scan against previous scan
- Shows animated alert for new critical findings
- Displays detailed vulnerability information

**What You'll See:**
- Simulation setup with progress indicators
- New vulnerability details:
  - CVE: CVE-2025-DEMO-001
  - Severity: Critical (CVSS 9.8)
  - Complete description and solution
- Flashing alert animation for critical findings

**Key Talking Points:**
- "This is how you'd identify newly discovered vulnerabilities in your environment"
- "Delta reporting reduces alert fatigue by showing only what's changed"
- "Perfect for integration with incident response workflows"
- "Enables tracking of your security posture over time"
- "Notice the immediate alert for critical new findings"

### 3. Splunk Event Format (Demo 3)

**What Happens:**
- Displays sample Splunk event structure
- Shows flattened JSON format
- Demonstrates progressive field reveal
- Animated visualization of event optimization

**What You'll See:**
- Sample JSON event with key fields
- Benefits explanation with timing effects
- Event structure progress bar
- Clear field formatting for Splunk

**Key Talking Points:**
- "Each vulnerability becomes a separate, searchable event in Splunk"
- "Notice the flat structure - no complex nesting that causes parsing issues"
- "All fields are normalized and consistent for reliable querying"
- "This format is optimized for Splunk's indexing engine"

## Final Summary Section

**What Happens:**
- Animated title reveal
- Progressive benefits overview
- Implementation options
- Sample command examples
- Visual completion animation

**Key Benefits Highlighted:**
1. Dramatic Data Reduction (X% smaller payloads)
2. Focus on Critical Issues (high-severity only)
3. Delta Reporting (new vulnerabilities only)
4. Splunk-Optimized Format (flat, searchable events)
5. License Efficiency (reduced Splunk consumption)

**Implementation Options Presented:**
- CI/CD Integration - Automated workflow integration
- Scheduled Jobs - Periodic data synchronization  
- API Triggered - Event-driven processing

**Sample Commands Shown:**
```bash
# Filter vulnerabilities
python3 scripts/filter_for_splunk.py scan.json filtered.json --min-severity 7.0

# Send to Splunk HEC
python3 scripts/send_to_splunk.py filtered_splunk.json --hec-url <URL> --token <TOKEN>
```

## Presentation Tips

### Timing and Pacing
- Allow the animations to complete - they create visual impact
- Use the pause moments to elaborate on concepts
- Let customers ask questions during the interactive breaks

### Customer-Specific Adaptations

**For Large Enterprises with License Concerns:**
- Emphasize the data reduction percentage and ROI calculations
- "If you're processing 1TB of vulnerability data monthly, this could reduce it to 200GB"

**For DevSecOps Teams:**
- Focus on CI/CD integration capabilities
- Highlight the delta reporting for continuous security monitoring
- "This integrates seamlessly with your existing GitHub Actions workflows"

**For Security Operations:**
- Emphasize the Splunk optimization and query performance
- "Your SOC analysts can now search vulnerability data 5x faster"
- Focus on the alert capabilities for new critical findings

## Advanced Demo Features

The script also references additional demos:
- Enhanced demo with high/critical filtering: `./demo-enhanced.sh`
- Quick high/critical filter: `./examples/demo_high_critical.sh`

## Next Steps After Demo

1. **Technical Discussion:**
   - Review customer's current Aqua scan frequency
   - Assess Splunk environment and HEC configuration
   - Discuss data retention and indexing strategies

2. **Integration Planning:**
   - CI/CD pipeline integration points
   - Scheduled job frequency requirements
   - API trigger scenarios and webhooks

3. **Implementation Timeline:**
   - Proof of concept setup (1-2 weeks)
   - Production deployment (2-4 weeks)
   - Training and handover (1 week)

## Troubleshooting

**Common Issues During Demo:**

- **"No sample report found" error**: 
  - Copy an Aqua scan JSON report to `demo-data/reports/original/aqua-scan.json`
  - Or use the example: `cp examples/input/aqua-scan.json demo-data/reports/original/`

- **jq command not found**: 
  - macOS: `brew install jq`
  - Ubuntu/Debian: `apt install jq`
  - Windows: Download from https://stedolan.github.io/jq/

- **Python errors**: 
  - Verify dependencies: `pip install -r requirements.txt`
  - Check Python version: `python3 --version` (should be 3.9+)

- **Animation not displaying properly**:
  - Ensure terminal supports color output
  - Use a modern terminal emulator
  - Test with `echo -e "\033[32mGreen text\033[0m"`

- **Statistics showing 0 values**:
  - Verify the JSON summary files are being created in `demo-data/reports/filtered/`
  - Check that the filtering scripts are executable and working properly 